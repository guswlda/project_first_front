# CRM Service Project 

### My Travel Planner

<p align="center">
  <img src="./images/mainpage.png">
</p>


</p>

# 1. í”„ë¡œì íŠ¸ ì†Œê°œ & ëª©ì 


### í”„ë¡œì íŠ¸ ì†Œê°œ
  
  *  AIë¥¼ í†µí•´ ì—¬í–‰ ê³„íšì„ ì‘ì„±í•˜ëŠ” ì›¹ì€ ìˆìŠµë‹ˆë‹¤.
  
  
  *  ì‚¬ìš©ìê°€ ë‹¬ë ¥ìœ¼ë¡œ ì—¬í–‰ ë‚ ì§œ, ì¥ì†Œ, ì •ë³´ ì‘ì„± í•˜ëŠ” ì›¹ì€ ì—†ìŠµë‹ˆë‹¤.
  

  * ì—¬í–‰ ê³„íš ë¿ë§Œ ì•„ë‹ˆë¼ ì‚¬ìš©ìê°€ ë°©ë¬¸í–ˆë˜ ì¥ì†Œë¥¼ ì‚¬ì§„ì„ ë“±ë¡í•˜ê³  ì—¬í–‰ ì •ë³´ë¥¼ ì‘ì„± í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œ


### í”„ë¡œì íŠ¸ ëª©ì 

  * êµ¬ê¸€ ì§€ë„ ì œê³µí•˜ì—¬ ë¡œë“œë§µ í™•ì¸ ê°€ëŠ¥


  * ì¼ì • ê³„íšì„ í†µí•´ ìº˜ë¦°ë”ì—ì„œ ë‚ ì§œë¥¼ ì„ íƒí•˜ì—¬ ëª©ë¡ ìƒì„±


  * ì—¬í–‰ ì¥ì†Œë¥¼ ì‹œ ìš°ì¸¡ì— ë‚´ê°€ ì ì—ˆë˜ ì—¬í–‰ ì •ë³´ í‘œí˜„, ìˆ˜ì • ë° ì‚­ì œ ê°€ëŠ¥


# 2. ê°œë°œ í™˜ê²½

### ê¸°ìˆ  ìŠ¤íƒ

* React 

```
# ğŸ“¦ Front - React App
â”œâ”€â”€ ğŸ“‚ .github
â”‚   â””â”€â”€ ğŸ“‚ workflows
â”‚       â””â”€â”€ ğŸ“„ cicd.yml (CI/CD íŒŒì´í”„ë¼ì¸ ì„¤ì • íŒŒì¼)
â”‚
â”œâ”€â”€ ğŸ“‚ build
â”‚   â””â”€â”€ ğŸ“„ (ë¹Œë“œëœ íŒŒì¼ë“¤)
â”‚
â”œâ”€â”€ ğŸ“‚ node_modules
â”‚   â””â”€â”€ ğŸ“„ (ì˜ì¡´ì„± ëª¨ë“ˆë“¤)
â”‚
â”œâ”€â”€ ğŸ“‚ public
â”‚   â””â”€â”€ ğŸ“„ (ì •ì  íŒŒì¼ë“¤)
â”‚
â”œâ”€â”€ ğŸ“‚ src
â”‚   â”œâ”€â”€ ğŸ“‚ Component
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ Auth
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ (ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ Home
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ (í™ˆ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ Calendarpage
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ (ìº˜ë¦°ë” í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ Map
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ (ì§€ë„ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ Planner
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ (í”Œë˜ë„ˆ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸)
â”‚   â”œâ”€â”€ ğŸ“„ Apps.js
â”‚   â””â”€â”€ ğŸ“„ Index.css
â”‚
â”œâ”€â”€ ğŸ“„ dockerfile
â”‚   â””â”€â”€ ğŸ“„ (Docker ì„¤ì • íŒŒì¼)
â”‚
â”œâ”€â”€ ğŸ“„ nginx.conf
â”‚   â””â”€â”€ ğŸ“„ (Nginx ì„¤ì • íŒŒì¼)
â”‚
â”œâ”€â”€ ğŸ“„ package.json
â”‚   â””â”€â”€ ğŸ“„ (ì˜ì¡´ì„± ë° í”„ë¡œì íŠ¸ ì •ë³´)
â”‚
â””â”€â”€ ğŸ“„ README.md
```

# 3. êµ¬í˜„ ê¸°ëŠ¥

### Google ì§€ë„ 

* ì—¬í–‰ ê³„íš ì‹œ ì°¸ì¡°í•  ì§€ë„

<p align="center">
  <img src="./images/MapApi.png">
</p>


* Google ì§€ë„ ë¡œë“œë§µ ê¸°ëŠ¥ ì§€ì›

<p align="center">
  <img src="./images/MapRoad.png">
</p>

```
const containerStyle = {
  width: '50%', // ì»¨í…Œì´ë„ˆ ë„ˆë¹„ ì„¤ì •
  height: '600px', // ì»¨í…Œì´ë„ˆ ë†’ì´ ì„¤ì •
  marginLeft: '5%', // ì™¼ìª½ ì—¬ë°± ì„¤ì •
};

// í•œë°˜ë„ì˜ ì¤‘ì‹¬ ìœ„ì¹˜ (ìœ„ë„, ê²½ë„)
const center = {
  lat: 36.5, // í•œë°˜ë„ ì¤‘ì‹¬ ìœ„ë„
  lng: 127.5, // í•œë°˜ë„ ì¤‘ì‹¬ ê²½ë„
};

const GoogleMapComponent = () => {

  // Google Maps API ë¡œë”© ìƒíƒœ í™•ì¸
  const { isLoaded } = useJsApiLoader({
    id: 'google-map-script', // ìŠ¤í¬ë¦½íŠ¸ ID
    googleMapsApiKey: process.env.REACT_APP_MAP_API_KEY, // í™˜ê²½ ë³€ìˆ˜ì—ì„œ API í‚¤ ê°€ì ¸ì˜¤ê¸°
  });

  // ì§€ë„ ë¡œë”©ì´ ì™„ë£Œë˜ë©´ GoogleMap ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜
  return isLoaded ? (
    <GoogleMap mapContainerStyle={containerStyle} center={center} zoom={7} /> // ì§€ë„ ì„¤ì •
  ) : (
    <div>Loading</div> // ë¡œë”© ì¤‘ í‘œì‹œ
  );
};

export default GoogleMapComponent; // ì»´í¬ë„ŒíŠ¸ ë‚´ë³´ë‚´ê¸°
```

### ë‹¬ë ¥


* React - NPM ë‹¬ë ¥ ëª¨ë“ˆ


* ë””ìì¸ ì»¤ìŠ¤í…€ ê°€ëŠ¥, ë‹¬ë ¥ ë‚ ì§œ ì„ íƒ ê°€ëŠ¥


* ì°¸ê³  ì‚¬ì´íŠ¸ : https://www.npmjs.com/package/react-date-range


<p align="center">
  <img src="./images/calendar.png">
</p>


```
<DateRangePicker
    anges={[selectionRange]} // ì„ íƒëœ ë‚ ì§œ ë²”ìœ„
    onChange={handleSelect} // ë‚ ì§œ ì„ íƒ ì‹œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜
    className="w-full custom-calendar"
    staticRanges={[]} // í”„ë¦¬ì…‹ ë²”ìœ„ ë¹„í™œì„±í™”
    inputRanges={[]} // ì…ë ¥ ë²”ìœ„ ë¹„í™œì„±í™”
    // locale={ko} // í•œêµ­ì–´ ë¡œì¼€ì¼ ì„¤ì •
/>

index.css

/* ìº˜ë¦°ë” ì»¤ìŠ¤í…€ í…ìŠ¤íŠ¸ */
.custom-calendar .rdrCalendarWrapper {
  font-size: 1.2rem; /* ê¸°ë³¸ ê¸€ê¼´ í¬ê¸° ì¡°ì • */
  color: #1f2937; /* í…ìŠ¤íŠ¸ ìƒ‰ìƒ ì„¤ì • (íšŒìƒ‰-700) */
  width: 100%; /* ë„ˆë¹„ 100% ì„¤ì • */
}

.custom-calendar .rdrMonthAndYearPickers select,
.custom-calendar .rdrMonthPicker select,
.custom-calendar .rdrYearPicker select {
  font-size: 1.2rem; /* ë“œë¡­ë‹¤ìš´ ê¸€ê¼´ í¬ê¸° ì¡°ì • */
}

.custom-calendar .rdrDayNumber span {
  font-size: 1.2rem; /* ë‚ ì§œ ë²ˆí˜¸ ê¸€ê¼´ í¬ê¸° ì¡°ì • */
}

.custom-calendar .rdrDayToday span {
  font-size: 1.25rem; /* ì˜¤ëŠ˜ ë‚ ì§œ ê¸€ê¼´ í¬ê¸° ì¡°ì • */
}

.custom-calendar .rdrDateDisplay {
  display: none; /* ë‚ ì§œ í‘œì‹œ ìˆ¨ê¹€ */
}

.custom-calendar .rdrWeekDay {
  font-size: 1.2rem; /* ì£¼ì¤‘ ì´ë¦„ ê¸€ê¼´ í¬ê¸° ì¡°ì • */
  text-align: center; /* ì¤‘ì•™ ì •ë ¬ */
}

.rdrDefinedRangesWrapper {
  display: none; /* ì •ì˜ëœ ë²”ìœ„ ìˆ¨ê¹€ */
}
```


### ì—¬í–‰ ëª©ë¡ ìƒì„±


<p align="center">
  <img src="./images/travelproject.png">
</p>


```
 useEffect(() => {

    // ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë Œë”ë§ë  ë•Œ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
    const fetchCalendarData = async () => {
      try {

        // ì„œë²„ì— GET ìš”ì²­ì„ ë³´ë‚´ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜´
        const response = await axios.get(
          `https://plannerback.guswldaiccproject.com/get_calendar_date/${authData.user_idx}`
        );

        // ì„œë²„ì—ì„œ ì‘ë‹µë°›ì€ ë°ì´í„°ê°€ ìˆì„ ë•Œ ì²˜ë¦¬
        if (response.data && response.data.length > 0) {
          // ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ ì²« ë²ˆì§¸ ë°ì´í„°ì—ì„œ í•„ìš”í•œ ê°’ë“¤ì„ ê°€ì ¸ì˜´
          const { project_idx, start_date, end_date } = response.data[0];

          // ë°›ì•„ì˜¨ í”„ë¡œì íŠ¸ IDì™€ ë‚ ì§œë¥¼ ìƒíƒœ ê°’ì— ì„¤ì •
          setProjectIdx(project_idx);
          setStartDate(subtractOneDay(start_date) || ''); // ì‹œì‘ ë‚ ì§œë¥¼ í•˜ë£¨ ë¹¼ì„œ ì„¤ì •
          setEndDate(subtractOneDay(end_date) || ''); // ì¢…ë£Œ ë‚ ì§œë„ í•˜ë£¨ ë¹¼ì„œ ì„¤ì •
        }
      } catch (error) {
        // ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ì— ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ì½˜ì†”ì— ì¶œë ¥
        console.error('ìº˜ë¦°ë” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
      }
    };

    // í•¨ìˆ˜ í˜¸ì¶œ (ì„œë²„ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜´)
    fetchCalendarData();
  }, [authData.user_idx]); // ì‚¬ìš©ì IDê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì˜´
```

# 4. ë°°í¬ 


### FRONT & BACK FLOW CHART


<p align="center">
  <img src="./images/fullflow.png">
</p>


```
# Front Deploy

## Deploy Structure
â”œâ”€â”€ ğŸ“¦ Docker Hub
â”‚   â”œâ”€â”€ ğŸ³ Node ì´ë¯¸ì§€
â”‚   â”œâ”€â”€ ğŸ—ï¸ Build ì´ë¯¸ì§€
â”‚   â””â”€â”€ ğŸŒ Nginx ì´ë¯¸ì§€
â”‚
â”œâ”€â”€ â˜ï¸ AWS
â”‚   â”œâ”€â”€ ğŸ–¥ï¸ EC2 ì¸ìŠ¤í„´ìŠ¤
â”‚   â”‚   â”œâ”€â”€ ğŸ”’ SSL HTTPS ì¸ì¦ì„œ
â”‚   â”‚   â”œâ”€â”€ ğŸŒ Route 53
â”‚   â”‚   â””â”€â”€ ğŸ“¡ CloudFront
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ”§ ì„¤ì •
â”‚       â”œâ”€â”€ ğŸ”‘ ë³´ì•ˆ ê·¸ë£¹
â”‚       â”œâ”€â”€ ğŸ“œ IAM ì—­í• 
â”‚       â””â”€â”€ ğŸŒ VPC ì„¤ì •
â”‚
â””â”€â”€ ğŸš€ GitHub Actions
    â”œâ”€â”€ âš™ï¸ .github/workflows/cicd.yml
    â”œâ”€â”€ ğŸ“„ GitHub í™˜ê²½ íŒŒì¼
    â””â”€â”€ ğŸƒ Action Runner
```


# 5. íŠ¸ëŸ¬ë¸” ìŠˆíŒ…


### ì§€ë„ í‘œí˜„ì´ ë˜ì§€ ì•ŠëŠ” ERROR


* isloaded í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ì „ì˜ ì§€ë„ë¥¼ ê·¸ëŒ€ë¡œ í‘œí˜„


* ì—¬í–‰ ì§€ë„ í´ë¦­ ì‹œ í™”ë©´ í‘œí˜„


```

Google Map - isloading

const GoogleMapComponent = () => {

  const { isLoaded } = useJsApiLoader({

    id: 'google-map-script',
    googleMapsApiKey: process.env.REACT_APP_MAP_API_KEY,
  });

  return isLoaded ? (
    <GoogleMap mapContainerStyle={containerStyle} center={center} zoom={7} />
  ) : (
    <div>Loading</div>
  );
};
```


### ìº˜ë¦°ë” ë‚ ì§œ ëœë¤ ERROR


* í˜ì´ì§€ ë¡œë“œ ì‹œ ì˜¤ëŠ˜ ë‚ ì§œë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ startDate : today, endDate: today ì„¤ì • 


```
calendar - today ê°’ìœ¼ë¡œ ë‚˜ì˜¤ì§€ ì•ŠìŒ

  useEffect(() => {

    // í˜ì´ì§€ê°€ ë¡œë“œë  ë•Œ ì˜¤ëŠ˜ ë‚ ì§œë¡œ ê¸°ë³¸ ì„¤ì •
    const today = new Date();
    setSelectionRange({
      startDate: today,
      endDate: today,
      key: 'selection',
    });

    // fetchCalendarData();

  }, []); // ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ í•œ ë²ˆë§Œ ì‹¤í–‰
```

# 6. ê°œë°œ í›„ê¸°


### ì•„ì‰¬ìš´ ì  & ë°°ìš´ì 


* Front ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê³¼ì •ì„ ì•Œ ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
  
* tailwindcss, index.CSS ì™€ useEffect, useStateë¥¼ í†µí•´ í”„ë¡œì íŠ¸ì— ë…¹ì¼ ìˆ˜ ìˆì–´ ì¢‹ì•˜ìŠµë‹ˆë‹¤.

* ë³€ìˆ˜ê°€ ë§ì•„ íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ì‹œ ë¬¸ì œì ì„ ì°¾ê¸° ì–´ë ¤ì› ìŠµë‹ˆë‹¤.

* reduxë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•´ ì•„ì‰½ìŠµë‹ˆë‹¤. axiosë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  user_idx(authData) , modalì— ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
